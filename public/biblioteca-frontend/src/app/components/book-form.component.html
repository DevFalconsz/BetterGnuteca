<div class="row justify-content-center">
  <div class="col-lg-8">
    <!-- Modern minimalist header -->
    <div class="page-header d-flex justify-content-between align-items-center">
      <h2>
        <i class="fas fa-book"></i>
        {{ isEditMode ? 'Editar Livro' : 'Novo Livro' }}
      </h2>
      <button class="btn btn-outline-secondary" (click)="cancel()">
        <i class="fas fa-arrow-left"></i>
        Voltar
      </button>
    </div>

    <!-- Mensagens de sucesso e erro -->
    <div *ngIf="success" class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="fas fa-check-circle me-2"></i>
      {{ success }}
    </div>

    <div *ngIf="error" class="alert alert-danger alert-dismissible fade show" role="alert">
      <i class="fas fa-exclamation-triangle me-2"></i>
      {{ error }}
    </div>

    <!-- Modern form layout -->
    <div class="card">
      <div class="card-body">
        <form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
          <!-- Basic info section -->
          <div class="form-section">
            <h3 class="form-section-title">
              <i class="fas fa-info-circle"></i>
              Informações Básicas
            </h3>
            <div class="form-grid">
              <div class="form-group">
                <label for="titulo" class="form-label">Título *</label>
                <input 
                  type="text" 
                  class="form-control"
                  [class.is-invalid]="hasFieldError('titulo')"
                  id="titulo" 
                  formControlName="titulo"
                  placeholder="Digite o título">
                <div *ngIf="hasFieldError('titulo')" class="invalid-feedback">
                  {{ getFieldError('titulo') }}
                </div>
              </div>

              <div class="form-group">
                <label for="authors" class="form-label">Autores *</label>
                <ng-select
                  [items]="authors"
                  bindLabel="name"
                  bindValue="id"
                  [multiple]="true"
                  placeholder="Selecione um ou mais autores"
                  formControlName="authorIds"
                  [ngClass]="{ 'is-invalid': hasFieldError('authorIds') }">
                </ng-select>
                <div *ngIf="hasFieldError('authorIds')" class="invalid-feedback">
                  {{ getFieldError('authorIds') }}
                </div>
              </div>

              <div class="form-group">
                <label for="paginas" class="form-label">Páginas *</label>
                <input 
                  type="number" 
                  class="form-control"
                  [class.is-invalid]="hasFieldError('paginas')"
                  id="paginas" 
                  formControlName="paginas"
                  placeholder="250"
                  min="1">
                <div *ngIf="hasFieldError('paginas')" class="invalid-feedback">
                  {{ getFieldError('paginas') }}
                </div>
              </div>

              <div class="form-group">
                <label for="dataPublicacao" class="form-label">Data de Publicação *</label>
                <input 
                  type="date" 
                  class="form-control"
                  [class.is-invalid]="hasFieldError('dataPublicacao')"
                  id="dataPublicacao" 
                  formControlName="dataPublicacao">
                <div *ngIf="hasFieldError('dataPublicacao')" class="invalid-feedback">
                  {{ getFieldError('dataPublicacao') }}
                </div>
              </div>

              <div class="form-group">
                <label for="disponivel" class="form-label">Status</label>
                <select 
                  class="form-select"
                  id="disponivel" 
                  formControlName="disponivel">
                  <option [value]="true">Disponível</option>
                  <option [value]="false">Indisponível</option>
                </select>
              </div>
            </div>
          </div>

          <!-- PDF upload section -->
          <div class="form-section">
            <h3 class="form-section-title">
              <i class="fas fa-file-pdf"></i>
              Arquivo PDF (Opcional)
            </h3>
            <div class="file-upload-area" (click)="fileInput.click()">
              <i class="fas fa-cloud-upload-alt"></i>
              <p>Clique para selecionar um arquivo PDF</p>
              <p class="file-info">Tamanho máximo: 10MB</p>
              <input 
                #fileInput
                type="file" 
                style="display: none;"
                accept=".pdf"
                (change)="onFileSelected($event)">
            </div>
            <div *ngIf="selectedFile" class="selected-file">
              <i class="fas fa-file-pdf"></i>
              {{ selectedFile.name }}
            </div>
          </div>

          <!-- Form actions -->
          <div class="form-actions">
            <button 
              type="button" 
              class="btn btn-outline-secondary"
              (click)="cancel()"
              [disabled]="loading">
              Cancelar
            </button>
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="loading || bookForm.invalid">
              <span *ngIf="loading" class="spinner-border spinner-border-sm"></span>
              <i *ngIf="!loading" class="fas fa-save"></i>
              {{ isEditMode ? 'Atualizar' : 'Salvar' }}
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modern tips card -->
    <div class="tips-card">
      <h6>
        <i class="fas fa-lightbulb"></i>
        Dicas
      </h6>
      <ul class="tips-list">
        <li>
          <i class="fas fa-check"></i>
          <span>Campos marcados com * são obrigatórios</span>
        </li>
        <li>
          <i class="fas fa-check"></i>
          <span>O arquivo PDF pode ser adicionado posteriormente</span>
        </li>
        <li>
          <i class="fas fa-check"></i>
          <span>Certifique-se de que as informações estão corretas antes de salvar</span>
        </li>
      </ul>
    </div>
  </div>
</div>
